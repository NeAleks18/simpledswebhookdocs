API
=====

.. _start:

Как пользоваться API?
------------

Все очень просто, для этого просто добавте Empty (Create Empty) и добавте компонент (Скрипт) DiscordWebhookAPI. Это будет вашим контроллером API

А еще, забыл не забудьте добавить token and id через Inspector.

.. _archor:

Якорные Имена
------------

ArchorName или же Якорные Имена, они есть в инспекторе.

Что это и зачем это?
Якорные имена - Имена вебхуков грубо говоря, по ним вы можете определять вебхуки и делать мультимэнеджеры. Это очень удобно

В TestAPI и Logging есть пример как его использовать.

.. _sendmsg:

Отправка сообщений
------------

.. code-block:: csharp

   public void SendMessage(bool debug, string content, string username = null, string avatar_url = null, bool tts = false, bool getmsgdata = false)

Разберем функцию прямиком от кода самого API. 

ЧТО ЭТО, ПОЧЕМУ НЕКОТОРЫЕ ПЕРЕМЕННЫЕ УЖЕ ОБОЗНАЧЕНЫ...
Не пугайтесь, это означает что это не важно и можно написать без обозначения.

А как мне перескочить username и изменить только avatar_url?
Все очень легко, просто напишите null где string формат а где bool, ставите как в примере сверху, таким образом вы просто перескочите.

Почему нет EMBED?
Пока что для меня это страшная вещь, в будущем это будет.

Что за bool debug?
Это дебаг, то есть при вызове функции будет паралельно в консоли логи о неудачах или удачах

Что такое getmsgdata?
Это булеон, если вы хотите получать информацию о сообщении которого вы отправили, (ID, CHANNELID, etc..) то ставте его.

.. note::

   Рекомендую перед первым использованием API и вообще самого вашего скрипта использоавть сначало DEBUG чтобы выявлять проблемы.

.. _getmsg:

Получение сообщения (От вебхука только)
------------

.. code-block:: csharp

   public string GetMessage(string msgid)

Разберем функцию прямиком от кода самого API. 

Что такое msgid?
msgid - MessageID, ID сообщения от вебхука, данные от которого нужно получить.

Как его использовать?
Как переменную, он возвращает строку с JSON кодом от Дискорда.

.. _editmsg:

Изменение сообщения (От вебхука только)
------------

.. code-block:: csharp

   public void EditMessage(bool debug, string msgid, string content)

Разберем функцию прямиком от кода самого API. 

Стоп, а зачем разберать, вроде тут все понятно, все что тут есть мы разбрали ранее, если останутся вопросы пишите мне.

.. _deletemsg:

Удаление сообщения (От вебхука только)
------------

.. code-block:: csharp

   public void DeleteMessage(bool debug, string msgid)

Разберем функцию прямиком от кода самого API. 

Тут тоже все понятно, ну впринципе это все функции.

.. _destroy:

Удаление Мэнеджера
------------

.. code-block:: csharp

   public void Destroy()

Зачем это?
Это нужно чтобы удалять мэнеджеры которые больше не понадобится, нужно для оптимизации игры.
